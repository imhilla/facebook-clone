<% unless current_user.friends.include? user %>
    <% if current_user.pending_requests.select { |m| m.user == user }.size != 0 %>
        <%= button_to  'Accept friend', edit_friendship_path(Friendship.all.find_by(user_id: user.id, friend_id: current_user.id)), method: :get %>
        <%= button_to  'Reject friend', friendship_path(Friendship.all.find_by(user_id: user.id, friend_id: current_user.id)), :method => :delete %>
    <% elsif current_user.friend_requests.select { |m| m.friend_id == user.id }.size != 0 %>
        <h3>Friends request sent</h3>
    <% else %>
        <%= button_to  'Add friend', friendships_path(:user_id => current_user.id , :friend_id => user.id) %>
    <% end %>
<% end %>
